<!doctype html>
<html>
   <head>
      <link rel="apple-touch-icon" type="image/png" href="{{ url_for('static', filename='apple-touch-icon-180x180.png') }}">
      <link rel="icon" type="image/png" href="{{ url_for('static', filename='icon-192x192.png') }}">
      <title>黒い砂漠 アクセ期待値</title>
      
      <!-- Select2 CSS -->
      <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet">
      
      <style>
         body {
            font-family: "Helvetica Neue", Arial, "Hiragino Kaku Gothic ProN", "Hiragino Sans", Meiryo, sans-serif;
            background-color: #e9f7ef;
            color: #333;
            line-height: 1.6;
            margin: 0;
            padding: 0;
         }

         header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #4caf50;
            padding: 15px;
            color: #fff;
         }

         header img {
            height: 40px;
         }

         h1 {
            font-size: 24px;
            text-align: center;
            padding: 20px;
            margin-bottom: 30px;
            color: #4caf50;
         }

         form {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            background-color: #fff;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            border-radius: 10px;
         }

         label {
            display: block;
            font-weight: bold;
            margin: 10px 0;
         }

         select {
            width: 100%;
            padding: 10px;
            font-size: 1rem;
            border: 1px solid #ccc;
            border-radius: 5px;
         }

         input[type="submit"] {
            display: block;
            width: 100%;
            padding: 10px;
            background-color: #4caf50;
            color: #fff;
            border: none;
            font-size: 1rem;
            cursor: pointer;
            border-radius: 5px;
            margin-top: 20px;
         }

         input[type="submit"]:hover {
            background-color: #3e8e41;
         }

         p {
            max-width: 600px;
            margin: 30px auto;
            padding: 20px;
            background-color: #fff;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            border-radius: 10px;
         }

         input[type="checkbox"] {
            margin: 0 10px 0 0;
         }

         .checkbox-label {
            font-weight: normal;
            display: inline;
         }
      
         .select2-container--default .select2-results__option {
            display: flex;
            align-items: center;
         }

         .option-image {
            width: 20px;
            height: 20px;
            margin-right: 10px;
         }

         .select2-container {
            width: 100% !important;
         }

         .select2-container .select2-selection--single {
            height: 38px !important;
         }

         .select2-container--default .select2-selection--single .select2-selection__rendered {
            line-height: 38px !important;
         }

         .select2-container--default .select2-selection--single .select2-selection__arrow {
            height: 38px !important;
         }

      </style>
   </head>
   <body>
      <header>
         <a href="https://twitter.com/Lejenay" target="_blank">
            <img src="{{ url_for('static', filename='icon-192x192.png') }}" alt="アイコン">
         </a>
         <span>黒い砂漠 アクセ期待値 計算機</span>
      </header>
      <h1>手持ちのアクセを錬金しちゃおう！</h1>
      <form method="POST">
         <label for="item">アクセ:</label>
         <select name="item" id="item" class="select2">
            <option value="crescent" data-image="{{ url_for('static', filename='crescent.webp') }}">三日月リング</option>
            <option value="tun_ring" data-image="{{ url_for('static', filename='tun_ring.webp') }}">ツンリング</option>
            <option value="tun_belt" data-image="{{ url_for('static', filename='tun_belt.webp') }}">ツンベルト</option>
            <option value="disto" data-image="{{ url_for('static', filename='disto.webp') }}">侵食</option>
            <option value="narc" data-image="{{ url_for('static', filename='narc.webp') }}">ナク</option>
            <option value="ruin_ring" data-image="{{ url_for('static', filename='ruin_ring.webp') }}">廃墟リング</option>
            <option value="tun_ear" data-image="{{ url_for('static', filename='tun_ear.webp') }}">ツン耳</option>
            <option value="tun_neck" data-image="{{ url_for('static', filename='tun_neck.webp') }}">ツンネク</option>
            <option value="turo_belt" data-image="{{ url_for('static', filename='turo_belt.webp') }}">トゥーロベルト</option>
            <option value="basi_belt" data-image="{{ url_for('static', filename='basi_belt.webp') }}">バジベルト</option>
            <option value="centa_belt" data-image="{{ url_for('static', filename='centa_belt.webp') }}">ケンタベルト</option>
            <option value="ominous_ring" data-image="{{ url_for('static', filename='ominous_ring.webp') }}">背後リング</option>
            <option value="ogre_ring" data-image="{{ url_for('static', filename='ogre_ring.webp') }}">オガリン</option>
            <option value="laytenn" data-image="{{ url_for('static', filename='laytenn.webp') }}">ライテン</option>
            <option value="sicil" data-image="{{ url_for('static', filename='sicil.webp') }}">シチル</option>
            <option value="dawn" data-image="{{ url_for('static', filename='dawn.webp') }}">黎明</option>
            <option value="vaha" data-image="{{ url_for('static', filename='vaha.webp') }}">バア</option>
            <option value="cadry" data-image="{{ url_for('static', filename='cadry.webp') }}">カドリー</option>
            
         </select>
         <label for="item">強化段階:</label>
         <select name="level" id="level">
            <option value="pri">真1</option>
            <option value="duo">真2</option>
            <option value="tri">真3</option>
         </select>

         <label for="family-fame">家門名声:</label>
         <input type="checkbox" id="family_fame" name="family_fame" value="on" {% if family_fame %} checked{% endif %}>
         <label class="checkbox-label" for="family_fame">7000以上</label>

         <label for="pp">家門名声:</label>
         <input type="checkbox" id="pp" name="pp" value="on" {% if pp %} checked{% endif %}>
         <label class="checkbox-label" for="pp">7000以上</label>

         <br>
         <br>
         <input type="submit" value="表示">
      </form>
      {% if tap %}
         <p>{{ name }}{{ level }}の強化期待値(シルバー)は{{ tap }}です。</p>
      {% endif %}

      {% if sell %}
         <p>{{ name }}をそのまま売ると、売り上げ(シルバー)は{{ sell }}です。</p>
      {% endif %}

      <!-- jQuery and Select2 JavaScript -->
      <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
      <script>
         $(document).ready(function() {
            function formatOption (option) {
               if (!option.id) {
                  return option.text;
               }
               var imgSrc = $(option.element).data('image');
               var optionText = option.text;
               var $option = $(
                  '<span><img src="' + imgSrc + '" class="option-image" /> ' + optionText + '</span>'
               );
               return $option;
            };

            $('.select2').select2({
               templateResult: formatOption,
               templateSelection: formatOption,
               escapeMarkup: function(m) { return m; }
            });
         });
      </script>
   </body>
</html>